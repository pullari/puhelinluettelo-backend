(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,n,t){e.exports=t(40)},38:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),u=t(12),c=t.n(u),o=t(5),i=t(2),l=function(e){var n=e.person,t=e.removePerson;return r.a.createElement("div",null,n.name," | ",n.number,r.a.createElement("button",{type:"button",onClick:function(){t(n)}},"Poista!"))},s=function(e){var n=e.personList,t=e.query,a=e.removePerson;return n.map(function(e){if(e.name.toLowerCase().includes(t.toLowerCase()))return r.a.createElement(l,{key:e.name,person:e,removePerson:a})})},m=function(e){var n=e.person,t=n.name,a=n.number,u=e.handleSubmit,c=e.handleNameChange,o=e.handleNumberChange;return r.a.createElement("form",{onSubmit:u},r.a.createElement("div",null,"nimi: ",r.a.createElement("input",{value:t,onChange:c})),r.a.createElement("div",null,"numero: ",r.a.createElement("input",{value:a,onChange:o})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"lis\xe4\xe4")))},f=function(e){var n=e.text,t=e.valuePointer,a=e.onChangeFunc;return r.a.createElement("div",null,n," ",r.a.createElement("input",{value:t,onChange:a}))},v=t(3),d=t.n(v),p="/api/persons",b=function(){return d.a.get(p).then(function(e){return e.data})},h=function(e){return d.a.post(p,e).then(function(e){return e.data})},E=function(e,n){return d.a.put("".concat(p,"/").concat(e),n).then(function(e){return e.data})},j=function(e){return d.a.delete("".concat(p,"/").concat(e)).then(function(e){return e.data})},g=function(e){var n=e.action;if(null===n)return null;var t=n.message;return"error"!==n.status?r.a.createElement("div",{className:"success"},t):r.a.createElement("div",{className:"error"},t)},O=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],u=n[1],c=Object(a.useState)(""),l=Object(i.a)(c,2),v=l[0],d=l[1],p=Object(a.useState)(""),O=Object(i.a)(p,2),w=O[0],C=O[1],P=Object(a.useState)(""),k=Object(i.a)(P,2),y=k[0],S=k[1],N=Object(a.useState)(null),L=Object(i.a)(N,2),H=L[0],x=L[1];Object(a.useEffect)(function(){b().then(function(e){u(e)})},[]);var R=function(e,n){n(e.target.value)},q=function(e,n){x({message:e,status:n}),setTimeout(function(){x(null)},5e3)},F=function(e){var n=t.filter(function(n){return n.name===e.name})[0];if(window.confirm("P\xe4ivitet\xe4\xe4nk\xf6 ".concat(e.name,"?"))){var a=Object(o.a)({},n,{number:e.number});E(a.id,a).then(function(){var r=t.map(function(n){return n.id!==a.id?n:Object(o.a)({},n,{number:e.number})});u(r),q("P\xe4ivitettiin ".concat(n.name),"success")}).catch(function(n){q("Henkil\xf6n ".concat(e.name," tietojen p\xe4ivitys ep\xe4onnistui. Henkil\xf6 saattaa olla poistettu."),"error")})}},J=function(e){return t.map(function(e){return e.name}).includes(e.name)};return r.a.createElement("div",null,r.a.createElement("h2",null,"Puhelinluettelo"),r.a.createElement(g,{action:H}),r.a.createElement(f,{text:"rajaa n\xe4ytett\xe4vi\xe4",valuePointer:y,onChangeFunc:function(e){return R(e,S)}}),r.a.createElement("h3",null,"Lis\xe4\xe4 uusi"),r.a.createElement(m,{person:{name:v,number:w},handleSubmit:function(e){e.preventDefault();var n={name:v,number:w};J(n)?F(n):h(n).then(function(e){u(t.concat(e)),q("Lis\xe4ttiin ".concat(e.name," listaan"),"success"),d("")}).catch(function(e){console.log("ERROR: ",e.response.data),q("Henkil\xf6n ".concat(n.name," lis\xe4ys ep\xe4onnistui. ").concat(e.response.data.error),"error")})},handleNameChange:function(e){return R(e,d)},handleNumberChange:function(e){return R(e,C)}}),r.a.createElement("h2",null,"Numerot"),r.a.createElement(s,{personList:t,query:y,removePerson:function(e){window.confirm("Poistetaanko ".concat(e.name,"?"))&&j(e.id).then(function(){var n=t.filter(function(n){return n.id!==e.id});q("Poistettiin ".concat(e.name," onnistuneesti"),"success"),u(n)}).catch(function(n){q("Henkil\xf6n ".concat(e.name," poisto ep\xe4onnistui. Henkil\xf6 saattaa olla jo poistettu."),"error")})}}))};t(38);c.a.render(r.a.createElement(O,null),document.getElementById("root"))}},[[13,2,1]]]);
//# sourceMappingURL=main.c70e530f.chunk.js.map